(()=>{"use strict";const t=async function(t){const e=await fetch(t);return await e.json()},e={makeNumberLegible(t){const e=t.toString(),n=e.split("").length,s=n%3;let a;a=e.substring(0,s);let c=s;for(;c<n;)a=""===a?a.concat(`${e.substring(c,c+3)}`):a.concat(`,${e.substring(c,c+3)}`),c+=3;return a},debounce(t,e=300,n=null){let s;return(...a)=>{s&&clearTimeout(s),s=setTimeout((()=>{t.apply(n,a)}),e)}}},n=function(){const t=this.dataset.id,n=document.querySelector("main"),s=document.querySelector(".search-and-filter-container");n.classList.contains("hide")||(n.classList.add("hide"),s.classList.add("hide"));!function(t){const n=document.createElement("div");var s,a;n.classList.add("country-card-full-display"),n.innerHTML=`<button class="button button--back">\n            <span>\n                <svg aria-hidden="true">\n    \n                    <use href="#arrow-back_icon"></use>\n    \n                </svg>\n                <span>Back</span>\n            </span>\n        </button>\n        <div class="info-container">\n            <img src="${t.flags.svg}" alt="${t.name.common} flag" class="flag-full">\n            <div class="infos">\n                <ul>\n                    <li aria-label="country name" class="country-name-text"> ${t.name.common}</li>\n                    <li>\n                        <span class="country-specs-title">Native Name:</span>\n                        <span>${Object.values(t.name.nativeName)[0].common}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">population:</span>\n                        <span>${e.makeNumberLegible(t.population)}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">Region:</span>\n                        <span>${t.region}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">Sub Region:</span>\n                        <span>${t.subregion}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">Capital:</span>\n                        <span>${t.capital}</span>\n                    </li>\n                </ul>\n    \n                <ul>\n                    <li>\n                        <span class="country-specs-title">Top Level Domain:</span>\n                        <span>${t.tld}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">Currencies:</span>\n                        <span>${Object.values(t.currencies)[0].name}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">Languages:</span>\n                        <span>${a=t.languages,Object.values(a).reduce(((t,e)=>t.concat(`, ${e}`)))}</span>\n                    </li>\n                </ul>\n                <div class="borders">\n                    <span class="country-specs-title">Border Countries:</span>\n                    ${s=t.borders,s?s.reduce(((t,e)=>(console.log(t),t.concat(`<button data-name=${e} class='button button--country'>${e}</button>`))),""):""}\n                </div>\n            </div>\n        </div>`,document.body.appendChild(n);const c=n.querySelector(".button--back");c.addEventListener("click",(t=>{const e=document.querySelector("main"),n=document.querySelector(".search-and-filter-container");document.body.removeChild(t.currentTarget.parentElement),e.classList.contains("hide")&&(e.classList.remove("hide"),n.classList.remove("hide"))}));const i=n.querySelectorAll(".button--country");i&&i.forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.dataset.name,n=document.querySelectorAll(".country-card");for(let t=0;t<n.length;t++)if(n[t].dataset.name.includes(e)){c.click(),n[t].click();break}}))}))}(JSON.parse(sessionStorage.getItem("data"))[t])},s=function(t){const s=document.createElement("div");s.addEventListener("click",e.debounce(n,100,s)),s.classList.add("country-card"),s.setAttribute("tabindex","0"),s.setAttribute("data-region",`${t.region}`),s.setAttribute("data-name",`${function(t,e){let n=e;for(const e in t)n=n.concat(` ${t[e].common}`);return n}(t.translations,t.name.common)}`);const a=e.makeNumberLegible(t.population);return s.innerHTML=`\n                            <img src=${t.flags.svg} class='flag' alt='${t.name.common} flag'>\n                            <ul aria-label=country details>\n                                <li class=country-name-text>${t.name.common}</li>\n                                <li>\n                                    <span class=country-specs-title>population:</span>\n                                    <span>${a}</span>\n                                </li>\n                                <li>\n                                    <span class=country-specs-title>region:</span>\n                                    <span> ${t.region} </span>\n                                </li>\n                                <li>\n                                    <span class=country-specs-title>capital:</span>\n                                    <span> ${t.capital}</span>\n                                </li>\n                            </ul>\n                            `,s},a=function(){if(this.parentElement.classList.contains("isfocused")){if(this.parentElement.classList.remove("isfocused"),""===this.value){const t=this.parentElement.querySelector("label"),e=this.parentElement.querySelector("svg");t.classList.remove("visually-hidden"),e.classList.remove("visually-hidden"),this.removeAttribute("style")}this.removeEventListener("focusout",a)}},c=function(){document.querySelector(".button--filter-region").click(),document.querySelectorAll(".regions > *").forEach((t=>{t.classList.contains("active")&&t.classList.remove("active")})),document.querySelectorAll(".country-card").forEach((t=>{t.dataset.region!==this.dataset.region&&t.classList.add("hide"),t.dataset.region===this.dataset.region&&t.classList.contains("hide")&&t.classList.remove("hide")})),this.classList.add("active")},i=function(){const t=document.querySelectorAll(".country-card"),e=this.value.toLowerCase();t.forEach((t=>{const n=t.dataset.name.toLowerCase();n.includes(e)||t.classList.contains("hide")||t.classList.add("hide"),n.includes(e)&&t.classList.contains("hide")&&t.classList.remove("hide")}))},o=function(){const t=/animate-card-\d/g,e=this.boundingClientRect.left+this.boundingClientRect.width;e>1100&&this.isIntersecting&&this.target.classList.add("animate-card-0"),e<1100&&e>850&&this.isIntersecting&&!t.test(this.target.className)&&this.target.classList.add("animate-card-1"),e<850&&e>550&&this.isIntersecting&&!t.test(this.target.className)&&this.target.classList.add("animate-card-2"),e<550&&this.isIntersecting&&!t.test(this.target.className)&&this.target.classList.add("animate-card-3")};!async function(){let e=0;const n=document.querySelector(".main"),a=await t("https://restcountries.com/v3.1/region/oceania");a.forEach((t=>{const a=s(t);a.setAttribute("data-id",e),e++,n.appendChild(a)}));const c=await t("https://restcountries.com/v3.1/region/africa");c.forEach((t=>{const a=s(t);a.setAttribute("data-id",e),e++,n.appendChild(a)}));const i=await t("https://restcountries.com/v3.1/region/europe");i.forEach((t=>{const a=s(t);a.setAttribute("data-id",e),e++,n.appendChild(a)}));const o=await t("https://restcountries.com/v3.1/region/asia");o.forEach((t=>{const a=s(t);a.setAttribute("data-id",e),e++,n.appendChild(a)}));const r=await t("https://restcountries.com/v3.1/region/americas");r.forEach((t=>{const a=s(t);a.setAttribute("data-id",e),e++,n.appendChild(a)}));const l=[];a.forEach((t=>{l.push(t)})),c.forEach((t=>{l.push(t)})),i.forEach((t=>{l.push(t)})),o.forEach((t=>{l.push(t)})),r.forEach((t=>{l.push(t)})),console.log(l),function(t){const e=t.reduce(((e,n)=>{return e.push({name:n.name,area:n.area,tld:n.tld,capital:n.capital,flags:n.flags,population:n.population,region:n.region,subregion:n.subregion,currencies:n.currencies,languages:n.languages,borders:(s=n.borders,a=t,s?a.filter((t=>s.includes(t.cca3))).reduce(((t,e)=>(t.push(e.name.common),t)),[]):null)}),e;var s,a}),[]);sessionStorage.setItem("data",JSON.stringify(e))}(l)}(),function(){const t=new IntersectionObserver((t=>{t.forEach((t=>{o.call(t)}))}),{root:null,threshold:.25}),e=window.matchMedia("prefers-reduced-motion");let n=1;const s=new MutationObserver((s=>{s.forEach((s=>{if("childList"===s.type&&!e.matches){const e=s.target.querySelector(`.country-card:nth-child(${n})`);t.observe(e),n++}}))})),a=document.querySelector("main");s.observe(a,{childList:!0})}(),function(){const t=document.querySelector("input[type=search]"),n=document.querySelectorAll(".regions > *:not(:first-child"),s=document.querySelector(".regions > *:first-child");s.addEventListener("click",(()=>{document.querySelector(".button--filter-region").click(),document.querySelectorAll(".regions > *").forEach((t=>{t.classList.contains("active")&&t.classList.remove("active")})),document.querySelectorAll(".country-card").forEach((t=>{t.classList.contains("hide")&&t.classList.remove("hide")})),s.classList.add("active")})),n.forEach((t=>{t.addEventListener("click",c)})),t.addEventListener("input",e.debounce(i,500,t)),document.querySelector(".button--filter-region").addEventListener("click",(function(){document.querySelector(".regions").classList.toggle("isclosed"),this.querySelector("svg").classList.toggle("rotate-180")}))}(),function(){const t=document.querySelector(".gopher");document.addEventListener("mousemove",(e=>{const n=t.getBoundingClientRect(),s=n.left+n.width/2,a=n.top+n.height/2,c=s-e.clientX,i=a-e.clientY,o=180*Math.atan2(i,c)/Math.PI;document.querySelectorAll(".eye").forEach((t=>{t.style.transform=`rotate(${-60+o}deg)`}))}))}(),document.querySelector(".button--toggle-theme").addEventListener("click",(function(){const t=document.querySelector("html");"dark"===t.className?(t.className="light",this.querySelector("use").setAttribute("href","#moon_icon"),this.querySelector("span > span").textContent="dark"):(t.className="dark",this.querySelector("use").setAttribute("href","#sun_icon"),this.querySelector("span > span").textContent="light")})),document.querySelector("input[type=search]").addEventListener("focusin",(function(){if(this.parentElement.classList.contains("isfocused"))return;this.parentElement.classList.add("isfocused"),this.style.width="100%";const t=this.parentElement.querySelector("label"),e=this.parentElement.querySelector("svg");t.classList.contains("visually-hidden")||(t.classList.add("visually-hidden"),e.classList.add("visually-hidden")),this.addEventListener("focusout",a)}))})();