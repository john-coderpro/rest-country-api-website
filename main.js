(()=>{"use strict";const e=async function(e){const t=await fetch(e);return await t.json()},t={makeNumberLegible(e){const t=e.toString(),n=t.split("").length,s=n%3;let a;a=t.substring(0,s);let c=s;for(;c<n;)a=""===a?a.concat(`${t.substring(c,c+3)}`):a.concat(`,${t.substring(c,c+3)}`),c+=3;return a},debounce(e,t=300,n=null){let s;return(...a)=>{s&&clearTimeout(s),s=setTimeout((()=>{e.apply(n,a)}),t)}}},n=function(e){return Object.values(e).reduce(((e,t)=>e.concat(`, ${t}`)))},s=function(){const e=this.dataset.id,s=document.querySelector("main"),a=document.querySelector(".search-and-filter-container");s.classList.contains("hide")||(s.classList.add("hide"),a.classList.add("hide"));!function(e){const s=document.createElement("div");var a;s.classList.add("country-card-full-display"),s.innerHTML=`<button class="button button--back">\n            <span>\n                <svg aria-hidden="true">\n    \n                    <use href="#arrow-back_icon"></use>\n    \n                </svg>\n                <span>Back</span>\n            </span>\n        </button>\n        <div class="info-container">\n            <img src="${e.flags.svg}" alt="${e.name.common} flag" class="flag-full">\n            <div class="infos">\n                <ul>\n                    <li aria-label="country name" class="country-name-text"> ${e.name.common}</li>\n                    <li>\n                        <span class="country-specs-title">Native Name:</span>\n                        <span>${Object.values(e.name.nativeName)[0].common}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">population:</span>\n                        <span>${t.makeNumberLegible(e.population)}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">Region:</span>\n                        <span>${e.region}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">Sub Region:</span>\n                        <span>${e.subregion}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">Capital:</span>\n                        <span>${e.capital}</span>\n                    </li>\n\n                    <li class=visually-hidden>\n                        <span class="country-specs-title">Top Level Domain:</span>\n                        <span>${e.tld}</span>\n                    </li>\n                    <li class=visually-hidden>\n                        <span class="country-specs-title">Currencies:</span>\n                        <span>${Object.values(e.currencies)[0].name}</span>\n                    </li>\n                    <li class=visually-hidden>\n                        <span class="country-specs-title">Languages:</span>\n                        <span>${n(e.languages)}</span>\n                    </li>\n                </ul>\n    \n                <ul aria-hidden=true>\n                    <li>\n                        <span class="country-specs-title">Top Level Domain:</span>\n                        <span>${e.tld}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">Currencies:</span>\n                        <span>${Object.values(e.currencies)[0].name}</span>\n                    </li>\n                    <li>\n                        <span class="country-specs-title">Languages:</span>\n                        <span>${n(e.languages)}</span>\n                    </li>\n                </ul>\n                <div class="borders">\n                    <span class="country-specs-title">Border Countries:</span>\n                    ${a=e.borders,a?a.reduce(((e,t)=>(console.log(e),e.concat(`<button data-name=${t} class='button button--country'>${t}</button>`))),""):""}\n                </div>\n            </div>\n        </div>`,document.body.appendChild(s);const c=s.querySelector(".button--back");c.addEventListener("click",(e=>{const t=document.querySelector("main"),n=document.querySelector(".search-and-filter-container");document.body.removeChild(e.currentTarget.parentElement),t.classList.contains("hide")&&(t.classList.remove("hide"),n.classList.remove("hide"))}));const i=s.querySelectorAll(".button--country");i&&i.forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.dataset.name,n=document.querySelectorAll(".country-card");for(let e=0;e<n.length;e++)if(n[e].dataset.name.includes(t)){c.click(),n[e].click();break}}))}))}(JSON.parse(sessionStorage.getItem("data"))[e])},a=function(e){const n=document.createElement("div");n.addEventListener("click",t.debounce(s,100,n)),n.classList.add("country-card"),n.setAttribute("tabindex","0"),n.setAttribute("data-region",`${e.region}`),n.setAttribute("data-name",`${function(e,t){let n=t;for(const t in e)n=n.concat(` ${e[t].common}`);return n}(e.translations,e.name.common)}`);const a=t.makeNumberLegible(e.population);return n.innerHTML=`\n                            <img src=${e.flags.svg} class='flag' alt='${e.name.common} flag'>\n                            <ul aria-label=country details>\n                                <li class=country-name-text>${e.name.common}</li>\n                                <li>\n                                    <span class=country-specs-title>population:</span>\n                                    <span>${a}</span>\n                                </li>\n                                <li>\n                                    <span class=country-specs-title>region:</span>\n                                    <span> ${e.region} </span>\n                                </li>\n                                <li>\n                                    <span class=country-specs-title>capital:</span>\n                                    <span> ${e.capital}</span>\n                                </li>\n                            </ul>\n                            `,n},c=function(){if(this.parentElement.classList.contains("isfocused")){if(this.parentElement.classList.remove("isfocused"),""===this.value){const e=this.parentElement.querySelector("label"),t=this.parentElement.querySelector("svg");e.classList.remove("visually-hidden"),t.classList.remove("visually-hidden"),this.removeAttribute("style")}this.removeEventListener("focusout",c)}},i=function(){document.querySelector(".button--filter-region").click(),document.querySelectorAll(".regions > *").forEach((e=>{e.classList.contains("active")&&e.classList.remove("active")})),document.querySelectorAll(".country-card").forEach((e=>{e.dataset.region!==this.dataset.region&&e.classList.add("hide"),e.dataset.region===this.dataset.region&&e.classList.contains("hide")&&e.classList.remove("hide")})),this.classList.add("active")},o=function(){const e=document.querySelectorAll(".country-card"),t=this.value.toLowerCase();e.forEach((e=>{const n=e.dataset.name.toLowerCase();n.includes(t)||e.classList.contains("hide")||e.classList.add("hide"),n.includes(t)&&e.classList.contains("hide")&&e.classList.remove("hide")}))},r=function(){const e=/animate-card-\d/g,t=this.boundingClientRect.left+this.boundingClientRect.width;t>1100&&this.isIntersecting&&this.target.classList.add("animate-card-0"),t<1100&&t>850&&this.isIntersecting&&!e.test(this.target.className)&&this.target.classList.add("animate-card-1"),t<850&&t>550&&this.isIntersecting&&!e.test(this.target.className)&&this.target.classList.add("animate-card-2"),t<550&&this.isIntersecting&&!e.test(this.target.className)&&this.target.classList.add("animate-card-3")};!async function(){let t=0;const n=document.querySelector(".main"),s=await e("https://restcountries.com/v3.1/region/oceania");s.forEach((e=>{const s=a(e);s.setAttribute("data-id",t),t++,n.appendChild(s)}));const c=await e("https://restcountries.com/v3.1/region/africa");c.forEach((e=>{const s=a(e);s.setAttribute("data-id",t),t++,n.appendChild(s)}));const i=await e("https://restcountries.com/v3.1/region/europe");i.forEach((e=>{const s=a(e);s.setAttribute("data-id",t),t++,n.appendChild(s)}));const o=await e("https://restcountries.com/v3.1/region/asia");o.forEach((e=>{const s=a(e);s.setAttribute("data-id",t),t++,n.appendChild(s)}));const r=await e("https://restcountries.com/v3.1/region/americas");r.forEach((e=>{const s=a(e);s.setAttribute("data-id",t),t++,n.appendChild(s)}));const l=[];s.forEach((e=>{l.push(e)})),c.forEach((e=>{l.push(e)})),i.forEach((e=>{l.push(e)})),o.forEach((e=>{l.push(e)})),r.forEach((e=>{l.push(e)})),console.log(l),function(e){const t=e.reduce(((t,n)=>{return t.push({name:n.name,area:n.area,tld:n.tld,capital:n.capital,flags:n.flags,population:n.population,region:n.region,subregion:n.subregion,currencies:n.currencies,languages:n.languages,borders:(s=n.borders,a=e,s?a.filter((e=>s.includes(e.cca3))).reduce(((e,t)=>(e.push(t.name.common),e)),[]):null)}),t;var s,a}),[]);sessionStorage.setItem("data",JSON.stringify(t))}(l)}(),function(){const e=new IntersectionObserver((e=>{e.forEach((e=>{r.call(e)}))}),{root:null,threshold:.25}),t=window.matchMedia("prefers-reduced-motion");let n=1;const s=new MutationObserver((s=>{s.forEach((s=>{if("childList"===s.type&&!t.matches){const t=s.target.querySelector(`.country-card:nth-child(${n})`);e.observe(t),n++}}))})),a=document.querySelector("main");s.observe(a,{childList:!0})}(),function(){const e=document.querySelector("input[type=search]"),n=document.querySelectorAll(".regions > *:not(:first-child"),s=document.querySelector(".regions > *:first-child");s.addEventListener("click",(()=>{document.querySelector(".button--filter-region").click(),document.querySelectorAll(".regions > *").forEach((e=>{e.classList.contains("active")&&e.classList.remove("active")})),document.querySelectorAll(".country-card").forEach((e=>{e.classList.contains("hide")&&e.classList.remove("hide")})),s.classList.add("active")})),n.forEach((e=>{e.addEventListener("click",i)})),e.addEventListener("input",t.debounce(o,500,e)),document.querySelector(".button--filter-region").addEventListener("click",(function(){document.querySelector(".regions").classList.toggle("isclosed"),this.querySelector("svg").classList.toggle("rotate-180")}))}(),function(){const e=document.querySelector(".gopher");document.addEventListener("mousemove",(t=>{const n=e.getBoundingClientRect(),s=n.left+n.width/2,a=n.top+n.height/2,c=s-t.clientX,i=a-t.clientY,o=180*Math.atan2(i,c)/Math.PI;document.querySelectorAll(".eye").forEach((e=>{e.style.transform=`rotate(${-60+o}deg)`}))}))}(),document.querySelector(".button--toggle-theme").addEventListener("click",(function(){const e=document.querySelector("html");"dark"===e.className?(e.className="light",this.querySelector("use").setAttribute("href","#moon_icon"),this.querySelector("span > span").textContent="dark"):(e.className="dark",this.querySelector("use").setAttribute("href","#sun_icon"),this.querySelector("span > span").textContent="light")})),document.querySelector("input[type=search]").addEventListener("focusin",(function(){if(this.parentElement.classList.contains("isfocused"))return;this.parentElement.classList.add("isfocused"),this.style.width="100%";const e=this.parentElement.querySelector("label"),t=this.parentElement.querySelector("svg");e.classList.contains("visually-hidden")||(e.classList.add("visually-hidden"),t.classList.add("visually-hidden")),this.addEventListener("focusout",c)}))})();